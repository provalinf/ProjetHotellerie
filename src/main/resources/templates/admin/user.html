<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	  xsi:schemaLocation="http://www.thymeleaf.org ">
<div th:object="${user}">
	<head th:replace="/frags/includes::head(*{firstname}+' - '+*{lastname})"></head>
</div>

<body>
<div th:replace="/frags/includes::navbar(${'admin'})"></div>
<header id="head" class="secondary"></header>


<!-- container -->
<div class="container">

	<ol class="breadcrumb">
		<li><a href="/admin/">Home</a></li>
		<li><a href="/admin/users/">Utilisateur</a></li>
		<li class="active">Utilisateur (
			<th:block th:object="${user}" th:text="*{firstname} + ' - ' + *{lastname}"/>
			)
		</li>
	</ol>

	<div class="row">

		<!-- Article main content -->
		<article class="col-sm-9 maincontent" th:if="${!unlinked_modules.isEmpty()}">

			<header class="page-header">
				<h1 class="page-title">Lier un module</h1>
			</header>

			<br/>
			<form method="POST" th:action="'/admin/user/' + ${user.id} + '/link'">
				<div class="row">
					<div class="col-sm-12">
						<select class="form-control" name="module">
							<option th:each="module: ${unlinked_modules}" th:object="${module}"
									th:value="*{id}" th:text="*{label} + ' - ' + *{verboseName}"></option>
						</select>
					</div>
				</div>
				<br/>
				<div class="row">
					<div class="col-sm-6"></div>
					<div class="col-sm-6 text-right">
						<input class="btn btn-action" type="submit" value="Lier ce module"/>
					</div>
				</div>
			</form>
		</article>
		<!-- /Article -->

		<!-- Article main content -->
		<article class="col-sm-9 maincontent">

			<header class="page-header">
				<h1 class="page-title">Modifier un utilisateur</h1>
			</header>
			<p th:object="${user}" th:text="*{firstname} + ' - ' + *{lastname}"></p>
			<br/>
			<form th:replace="/frags/form::user-form"></form>

		</article>
		<!-- /Article -->

		<!-- Sidebar -->
		<aside class="col-sm-3 sidebar sidebar-right">

			<div class="widget">
				<h4>Information</h4>
				<p>Modifier un nouvel utilisateur en base.</p>
			</div>
			<div class="widget">
				<h4>Attention</h4>
				<p>Les modifications apportées à cet utilisateur risque d'impacter l'accès aux dépôts d'avis et de
					notes.</p>
			</div>

		</aside>
		<!-- /Sidebar -->

		<article class="col-xs-12 maincontent">
			<div class="jumbotron top-space">
				<div class="container">

					<div class="row">
						<div class="col-md-12 col-sm-12 highlight">
							<div class="h-caption"><h3><i class="fa fa-users fa-5"></i>
								<th:block th:with="text=${user instanceof T(m2.info.models.user.Teacher) ? 'Enseigne' : 'Est inscrit dans'}"
																								 th:text="${text}"/></h3></div>
							<div class="h-body text-center" style="font-size: 18px; line-height:1.2">
								<div th:if="${!linked_modules.isEmpty()}" th:each="module:${linked_modules}" th:object="${module}">
									<p><a th:href="@{/admin/module/} + *{id}"
										  th:text="*{label} + ' - ' + *{verboseName}"></a></p>
								</div>
								<div th:if="${linked_modules.isEmpty()}"><p style="font-size: 16px">Aucun module</p></div>
							</div>
						</div>
					</div>
					<br/>
				</div>
			</div>
		</article>

	</div>
</div>    <!-- /container -->


<footer th:replace="/frags/includes::foot"></footer>
</body>
</html>