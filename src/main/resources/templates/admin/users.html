<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.thymeleaf.org ">
<head lang="fr">
    <title>Panneau utilisateur</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
</head>
<body>
<header th:replace="/frags/header::admin-header"></header>
<form method="POST" action="">
    <h1>Ajouter un nouvel utilisateur</h1>
    <label for="id">N° identifiant *</label>
    <input type="text" id="id" name="id" required="required"/>
    <br/>
    <label for="lastname">Nom *</label>
    <input type="text" id="lastname" name="lastname" maxlength="32" required="required"/>
    <br/>
    <label for="firstname">Prénom *</label>
    <input type="text" id="firstname" name="firstname" maxlength="32" required="required"/>
    <br/>
    <fieldset>
        <legend>Rôle</legend>
        <label for="teacherAuth">Enseignant</label>
        <input type="radio" id="teacherAuth" value="TEACHER" name="authority"/>
        <label for="studentAuth">Etudiant</label>
        <input type="radio" id="studentAuth" value="STUDENT" name="authority" checked="checked"/>
    </fieldset>
    <input type="submit" value="Ajouter"/>
</form>
<hr/>
<table>
    <caption>Utilisateurs</caption>
    <thead>
    <tr>
        <th>N° enseignant / étudiant</th>
        <th>Nom</th>
        <th>Prénom</th>
        <th>Identifiant</th>
        <th>Rôle</th>
        <th>Supprimer</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="user: ${users}" th:object="${user}">
        <td><a th:text="*{id}" th:href="@{/admin/user/} + *{id}"></a></td>
        <td th:text="*{lastname}"></td>
        <td th:text="*{firstname}"></td>
        <td th:text="*{username}"></td>
        <td th:with="role=${user instanceof T(m2.info.models.user.Teacher) ? 'Enseignant' : 'Etudiant'}" th:text="${role}"></td>
        <td><a th:href="@{/admin/user/} + *{id} + '/delete'">X</a></td>
    </tr>
    </tbody>
</table>
<hr/>
</body>
</html>