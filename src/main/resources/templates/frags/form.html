<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.thymeleaf.org ">
<body>
<form th:fragment="module-form" method="POST" action="">
    <table>
        <tr>
            <td><label for="verboseName">Nom *</label></td>
            <td><input type="text" id="verboseName" name="verboseName" required="required"
                       th:value="${module?.verboseName}" maxlength="32"
                       pattern="[A-Za-z0-9àéèêë]( ?[A-Za-z0-9àéèêë])+"
                       title="2 caractères min., alphanumériques éventuellement séparés par un espace"/></td>
        </tr>
        <tr>
            <td><label for="label">Libellé *</label></td>
            <td><input type="text" id="label" name="label" required="required"
                       th:value="${module?.label}" maxlength="8"
                       pattern="[A-Za-z0-9àéèêë]( ?[A-Za-z0-9àéèêë])+"
                       title="2 caractères min., alphanumériques éventuellement séparés par un espace"/></td>
        </tr>
        <tr>
            <td><label for="description">Description</label></td>
            <td><textarea id="description" name="description" th:text="${module?.description}"
                          placeholder="Description du module..." maxlength="255"></textarea></td>
        </tr>
        <tr>
            <td></td>
            <td><input type="submit" th:value="${module} ? 'Modifier' : 'Ajouter'"/></td>
        </tr>
    </table>
</form>

<form th:fragment="eval-form" method="POST" action="">
    <table>
        <tr th:if="${modules != null and !modules.isEmpty()}">
            <td><label for="module">Module</label></td>
            <td>
                <select id="module" name="module">
                    <option th:each="module:${modules}" th:object="${module}" th:value="*{id}" th:text="*{label} + ' - ' + *{verboseName}"></option>
                </select>
            </td>
        </tr>
        <tr th:replace="/frags/eval::select(consistency, 'Cohérence CM/TD/TP', ${eval} ? ${eval.consistency} : 0)"></tr>
        <tr th:replace="/frags/eval::select(documentation, Documentation, ${eval} ? ${eval.documentation} : 0)"></tr>
        <tr th:replace="/frags/eval::select(lecture, 'Cours Magistraux', ${eval} ? ${eval.lecture} : 0)"></tr>
        <tr th:replace="/frags/eval::select(personalInterest, 'Interêt personnel', ${eval} ? ${eval.personalInterest} : 0)"></tr>
        <tr th:replace="/frags/eval::select(practicalWork, 'Travaux Pratiques', ${eval} ? ${eval.practicalWork} : 0)"></tr>
        <tr th:replace="/frags/eval::select(tutorial, 'Travaux Dirigés', ${eval} ? ${eval.tutorial} : 0)"></tr>
        <tr th:replace="/frags/eval::select(workload, 'Charge de travail', ${eval} ? ${eval.workload} : 0)"></tr>
        <tr>
            <td><label for="comment">Commentaire</label></td>
            <td><textarea id="comment" name="comment" th:text="${eval?.comment}"
                          placeholder="Commentaire à propos du module..." maxlength="255"></textarea></td>
        </tr>
        <tr>
            <td></td>
            <td><input type='submit' th:value="${eval} ? 'Modifier' : 'Evaluer'"/></td>
        </tr>
    </table>
</form>

<form th:fragment="user-form" method="POST" action="">
    <table>
        <tr th:if="${user == null}">
            <td><label for="id">Identifiant national *</label></td>
            <td><input type="text" id="id" name="id" required="required"
                       pattern="[A-Za-z0-9]*" th:value="${user?.id}"
                       minlength="11" maxlength="11" title="11 caractères alphanumériques"/></td>
        </tr>
        <tr>
            <td><label for="lastname">Nom *</label></td>
            <td><input type="text" id="lastname" name="lastname" maxlength="16" required="required"
                       pattern="[A-Za-zàéèêë]+-?[A-Za-zàéèêë]+" th:value="${user?.lastname}"
                       title="2 caractères min., alphabétiques éventuellement séparés par un tiret"/></td>
        </tr>
        <tr>
            <td><label for="firstname">Prénom *</label></td>
            <td><input type="text" id="firstname" name="firstname" maxlength="16" required="required"
                       pattern="[A-Za-zàéèêë]+-?[A-Za-zàéèêë]+" th:value="${user?.firstname}"
                       title="2 caractères min., alphabétiques éventuellement séparés par un tiret"/></td>
        </tr>
        <tr>
            <td>
                <fieldset th:if="${user == null}">
                    <legend>Rôle</legend>
                    <label for="teacherAuth">Enseignant</label>
                    <input type="radio" id="teacherAuth" value="TEACHER" name="authority"/>
                    <label for="studentAuth">Etudiant</label>
                    <input type="radio" id="studentAuth" value="STUDENT" name="authority" checked="checked"/>
                </fieldset>
            </td>
            <td><input type="submit" th:value="${user} ? 'Modifier' : 'Ajouter'"/></td>
        </tr>
    </table>
</form>
</body>
</html>